<!DOCTYPE html>
<html>
	<head>
		<title>Building AltspaceVR Apps With A-Frame</title>
		<script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
		<script src="https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/v0.3.0/dist/aframe-altspace-component.min.js"></script>

		<link rel='stylesheet' href='lib/prism.css'/>
		<style>
			html, body {
				margin: 0;
				padding: 0;
				height: 100%;
				background-color: whitesmoke;

				font-family: 'Helvetica Neue', arial, sans-serif;
				line-height: 1.5em;
			}
			#container {
				width: 1000px;
				min-height: 100%;
				background-color: white;
				margin: 0 auto;
				padding: 10px;
				box-sizing: border-box;
			}

			figure {
				max-width: 100%;
			}
			img, video {
				max-width: 100%;
			}
			img.icon {
				height: 1em;
				position: relative;
				top: 2px;
			}
			a-scene {
				border: solid black 1px;
				width: 600px;
				height: 450px;
			}
		</style>

	</head>
	<body>
		<div id='container'>

			<h1>Building AltspaceVR Apps With A-Frame</h1>

			<p>
				When it comes to building something quick in Altspace, it's hard
				to beat <a target='_blank' href='https://aframe.io/'>A-Frame</a>.
				It has a simple HTML-based syntax, so anyone acquainted with web
				development will pick it up in no time. On the other hand, if you
				don't know what an HTML tag is, or how to add an image to a page,
				you should go through MDN's terrific
				<a href='https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Introduction'
					target='_blank'>Introduction to HTML</a> before you continue.
			</p>

			<p>
				The world is full of web developers though, so if you feel
				comfortable experimenting on your own, you should jump right in
				with the <a href='https://aframe.io/docs/0.3.0/introduction/' target='_blank'>
				A-Frame Documentation</a>. You just need to add the Altspace
				component to your <code>&lt;a-scene&gt;</code> tag. Keep in mind
				though that development in Altspace has a few
				<a href='https://github.com/altspacevr/altspacesdk#threejs-feature-support'>
				caveats</a>.
			</p>
			
			<p>
				In either case, you should join the <a href='https://altspacevrsdk.slack.com'
				>AltspaceVR SDK Slack channel</a>! We love to see what you're
				working on, and are always happy to answer questions. In addition,
				there are special activities available only for developers that
				may be better for apps. Just request developer status on Slack,
				and we'll hook you up!
			</p>
			
			<h2>What is A-Frame?</h2>

			<p>
				A-Frame is a relatively easy way to build a 3d scene without a lot
				of complicated coding. It's nearly as simple as adding an object,
				then telling it where it should be in the space. Take a look at
				the demo below:
			</p>

			<a-scene embedded altspace='vertical-align: bottom;' >
				<a-assets>
					<img id='moon' src='assets/moon.jpg'/>
					<img id='stars' src='assets/stars.png'/>
				</a-assets>
				<a-sphere position='0 1.5 0' material='src: #moon;'>
					<a-animation to='0 360 0' easing='linear' dur='20000' repeat='indefinite'/>
				</a-sphere>
				<a-sky src='#stars' radius='2500'></a-sky>
				<a-entity position='0 0 2'>
					<a-camera></a-camera>
				</a-entity>
			</a-scene>

			<p>
				This demo was constructed with a mere dozen lines of pseudo-HTML
				(plus some boilerplate):
			</p>

			<pre><code class='language-markup'><!--
-->&lt;!DOCTYPE html&gt;
&lt;html&gt;&lt;body&gt;
&lt;script src="https://aframe.io/releases/0.3.0/aframe.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/v0.3.0/dist/aframe-altspace-component.min.js"&gt;&lt;/script&gt;

&lt;!-- set up the scene --&gt;
&lt;a-scene altspace='vertical-align: bottom;'&gt;

	&lt;!-- preload all our textures --&gt;
	&lt;a-assets&gt;
		&lt;img id='moon' src='assets/moon.jpg'/&gt;
		&lt;img id='stars' src='assets/stars.png'/&gt;
	&lt;/a-assets&gt;
	
	&lt;!-- add the moon to the scene --&gt;
	&lt;a-sphere position='0 1.5 0' material='src: #moon;'&gt;
		&lt;!-- add an animation to make it rotate --&gt;
		&lt;a-animation to='0 360 0' easing='linear' dur='20000' repeat='indefinite'/&gt;
	&lt;/a-sphere&gt;
	
	&lt;!-- add the backdrop of stars --&gt;
	&lt;a-sky src='#stars' radius='2500'&gt;&lt;/a-sky&gt;
	
	&lt;!-- add a view camera (2d only) --&gt;
	&lt;a-entity position='0 0 2'&gt;
		&lt;a-camera&gt;&lt;/a-camera&gt;
	&lt;/a-entity&gt;
	
&lt;/a-scene&gt;

&lt;/body&gt;&lt;/html&gt;<!--
			--></code></pre>
			
			<p>
				We'll dig into this in a bit, and understand it line by line, but
				first, a word about the overall structure.
			</p>
			
			<h2>Hosting Your App</h2>
			
			<p>
				Like all websites, Altspace apps require a publicly available
				server to pass out copies of your code. For new developers, the
				easiest way to get up and running quickly is to use a cloud-based
				service like <a href='https://jsbin.com'>JSBin</a>. You can open
				your code in the personal browser, and open the live preview in
				the enclosure (via Share > Output only). This way you don't need
				to set up your own server.
			</p>
			
			<p>
				Of course, JSBin will be cumbersome for an app of any significant
				size, so you'll want to make your own arrangements for hosting
				when your app starts coming together. One popular option is <a
				href='https://pages.github.com/'>GitHub Pages</a>, where you
				upload your files, and they host them as part of their suite
				of tools. This is the recommended option for medium-sized projects.
				Beyond that, you need to look at purchasing dedicated hosting.
			</p>
			
			<h2>Entity-Component-System Pattern</h2>
			
			<p>
				From the <a href='https://aframe.io/docs/0.3.0/core/' target='_blank'>
				A-Frame documentation</a>:
			</p>
			
			<blockquote>
				<p>
					A-Frame is based on an entity-component-system pattern (ECS), a
					pattern common in game development that emphasizes composability
					over inheritance:
				</p>

				<ul>
					<li>An entity is a general-purpose object that inherently does
						and renders nothing.</li>
					<li>A component is a reusable module that is plugged into entities
						in order to provide appearance, behavior, and/or functionality.
						They are plug-and-play for objects.</li>
					<li>A system provides global scope, services, and management to
						classes of components.</li>
				</ul>
				
				<p>
					ECS lets us build complex entities with rich behavior by plugging
					different reusable components into the sockets on the entity.
					Contrast this to traditional inheritance where if we want to extend
					an object, we would have to manually create a new class to do so.
				</p>
			</blockquote>
			
			<p>
				In this system, entities are represented as HTML tags, and components
				are attributes on those tags. So in
			</p>
			
			<pre><code class='language-markup'><!--
				-->&lt;a-box position="0 0 0" color='red'/&gt;<!--
			--></code></pre>
			
			<p>
				<code>a-box</code> is the entity, and <code>position</code> and <code>
				color</code> are components of that entity. Note that in this example,
				<code>a-box</code> is a "primitive", which is a special case of <code>
				a-entity</code>. In its full form, that primitive would look something
				like this:
			</p>
			
			<pre><code class='language-markup'><!--
			-->&lt;a-entity geometry='primitive: box' material='color: red' position='0 0 0'/&gt;<!--
			--></code></pre>
			
			<p>
				There are lots of different primitives that do different things, but
				in general they clean up and repackage some of the most commonly
				included components on that entity. For the full list of primitives,
				see the <a href='https://aframe.io/docs/0.3.0/primitives/'
				target='_blank'>A-Frame documentation</a>.
			</p>
			
			<h2>&lt;a-scene&gt;</h2>
			
			<pre><code class='language-markup'><!--
-->&lt;a-scene altspace='vertical-align: bottom;'&gt;
	...
&lt;/a-scene&gt;<!--
			--></code></pre>

			<p>
				<code>&lt;a-scene&gt;</code> is the root entity of the scene,
				and required by all A-Frame apps. To this we add our <code
				>altspace</code> component, which will instruct A-Frame to
				send the scene to Altspace instead of drawing in 2d. The
				component also instructs Altspace to position our app relative
				to the floor instead of relative to the center of the enclosure
				(<code>vertical-align: bottom;</code>).
			</p>
		
			<h2>&lt;a-assets&gt;</h2>
			
			<pre><code class='language-markup'><!--
-->&lt;a-assets&gt;
	&lt;img id='moon' src='assets/moon.jpg'/&gt;
	&lt;img id='stars' src='assets/stars.png'/&gt;
&lt;/a-assets&gt;<!--
			--></code></pre>
			
			<p>
				Most scenes are built from a collection of external models and images.
				By loading those models/images in the <code>&lt;a-assets&gt;</code>
				section, they are loaded synchronously, meaning that the scene won't
				continue until the assets are finished loading, yielding a smoother
				experience. Those assets are also cached, so you can use them multiple
				times without having to load them again.
			</p>
			
			<p>
				To load individual assets, you'll need to use an <code>&lt;a-asset&gt;
				</code>, <code>&lt;img&gt;</code>, or <code>&lt;video&gt;</code> tag
				under the <code>&lt;a-assets&gt;</code> to load it. Make sure to give
				each asset an identifier via the <code>id</code> attribute, so you can
				reference it later. Check the <a href=
				'https://aframe.io/docs/0.3.0/core/asset-management-system.html'>
				A-Frame assets documentation</a> for details about your particular
				model format.
			</p>
			
			<h2>&lt;a-sphere&gt;</h2>
			
			<pre><code class='language-markup'><!--
-->&lt;a-sphere position='0 1.5 0' material='src: #moon;'&gt;
	...
&lt;/a-sphere&gt;<!--
			--></code></pre>
			
			<p>
				This part is dead simple. The tag itself creates a sphere of the
				default radius (1m), the <code>position</code> component triple
				positions it at roughly eye-level (1.5m off the floor), and the
				<code>material</code> component describes what the sphere looks
				like. In this case, we tell it to use the moon texture we loaded
				in the assets section (the hashtag notation is commonly used to
				refer to tag identifiers, i.e. the <code>id</code> attribute).
			</p>
			
			<h2>&lt;a-animation&gt;</h2>
			
			<pre><code class='language-markup'><!--
-->&lt;a-animation to='0 360 0' easing='linear' dur='20000' repeat='indefinite'/&gt;<!--
			--></code></pre>

			<p>
				Animations are a little more complicated. They exist as their own
				tag, and apply to their container entity. In the example, the
				animation causes the sphere to rotate (the default attribute to
				animate) smoothly (<code>easing='linear'</code>), taking 20
				seconds (<code>dur='20000'</code>) for a full 360 degrees (<code
				>to='0 360 0'</code>), repeating infinitely (<code>repeat='indefinite'</code>).
			</p>
			
			<p>
				Animations come in all shapes and sizes, and it would be impossible
				to represent them all here. See the <a href='https://aframe.io/docs/0.3.0/core/animations.html'
				>A-Frame documentation</a> for all the details.
			</p>
			
			<h2>&lt;a-sky&gt;</h2>
			
			<pre><code class='language-markup'><!--
				-->&lt;a-sky src='#stars' radius='2500'&gt;&lt;/a-sky&gt;<!--
			--></code></pre>
			
			<p>
				Skyboxes are a very old level design trick, and add a lot of
				ambience to a scene. To add one to your app, you only need to use
				the <code>&lt;a-sky&gt;</code> tag, with the <code>src</code>
				component set to an <a href='http://wiki.panotools.org/Panorama_formats#Equirectangular'
				>equirectangular</a> panoramic image. We also need to set the
				radius of the sky down to 2500, so that it doesn't conflict
				with Altspace's normal sky.
			</p>
			
			<h1>What's Next?</h1>
			
			<p>
				So that's it! You should now know how to set up your very own
				simple Altspace app with A-Frame. Congratulations, you're a
				developer! If you're looking for specific information, again,
				look us up on <a href='https://altspacevrsdk.slack.com'>Slack</a>,
				and we'll walk you through whatever difficulty you're having.
			</p>
		</div>
		
		<script src="lib/prism.js"></script>
	</body>
</html>
